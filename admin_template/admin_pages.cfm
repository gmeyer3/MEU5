<!DOCTYPE html><html lang="en"><head><cfif structKeyExists(url,'nav_main')>    <cfset opt = 1>    <cfset header_html_text = "Pages : Main Nav">	<cfset formArgs = 'nav_main=true'><cfelseif structKeyExists(url,'nav_sub')>    <cfset opt = 2>    <cfset header_html_text = "Pages : Sub Nav">	<cfset formArgs = 'nav_sub=true'><cfelseif structKeyExists(url,'tab')>    <cfset opt = 3>    <cfset header_html_text = "Pages : Tabs">	<cfset formArgs = 'tab=true'></cfif><cfinclude template="inc_includes_all.cfm"><cfif NOT structKeyExists(session,'username')>  <cflocation url="index.cfm"></cfif><cfset head_tag_code()></head><body><cfset header_html(header_html_text)><div class="container-fluid"><!--- class="container-fluid" --->  <div class="row-fluid"><!--- class="row-fluid" --->    <div class="span2">      <cfset left_top_html()>      <cfset left_nav_html()>            <!--/.well -->     </div>    <!--/span-->    <div class="span10">             <!--- <div class="row-fluid">    <ul class="breadcrumb pull-right">        <li><a href="#">Home</a> <span class="divider">/</span></li>        <li><a href="#">Library</a> <span class="divider">/</span></li>        <li class="active">Data</li>    </ul></div> --->            <div class="well">        <cfif structKeyExists(form,'action')>                        <div class="alert alert-success" data-close="normal">                <h2>Your update was successful!</h2>            </div>        </cfif>        <!-----------------------------------------------------------------------------------------------------------------------------SHOW ADD FORM----------------------------------------------------------------------------------------------------------------------------->                 		 		 <cfif opt NEQ 2>         	<cfinclude template="admin_pages/add_form.cfm">         </cfif>                     <!-----------------------------------------------------------------------------------------------------------------------------SHOW SINGLE RECORD FOR EDITING (IF URL.EDIT EXISTS)----------------------------------------------------------------------------------------------------------------------------->                           <!--- Only show if url.edit is defined --->            <cfif structKeyExists(url,'edit')>                        	<cfinclude template="admin_pages/edit_form.cfm">                            </cfif>                           <!-----------------------------------------------------------------------------------------------------------------------------PROCESS **INSERT** RECORD IF PASSED----------------------------------------------------------------------------------------------------------------------------->                   <cfif structKeyExists(form,'action')>	<cfif form.img NEQ ''>        <!--- Process upload, resizes and return file name for placement in db table --->        <cfset formFileName = fileControl("assets/img_pages","img",rArr)>                <!--- Place returned file name into corresponding form field --->        <cfset form.img = formFileName>    </cfif>                	<cfif form.action EQ 'add'>	    	<cfset insert_pages_options(dsn,opt,form)>                <!--- Update SiteMap File --->        <cfset createSiteMap()>        </cfif><!-----------------------------------------------------------------------------------------------------------------------------PROCESS **UPDATE** RECORD IF PASSED----------------------------------------------------------------------------------------------------------------------------->   	<cfif form.action EQ 'edit'>		<cfset set_pages(dsn,form,true,form.rid)>                <!--- Update SiteMap File --->        <cfset createSiteMap()>        </cfif></cfif><!-----------------------------------------------------------------------------------------------------------------------------PROCESS **DELETE** RECORD IF PASSED----------------------------------------------------------------------------------------------------------------------------->   <cfif structKeyExists(url,'delete')>	        	<cfset qrs_get_pages_imgname = get_pages(dsn,url.delete)>		<cfset del_pages(dsn,url.delete)>        <cfset imageDelete("assets/img_pages","#qrs_get_pages_imgname.img#",rArr)>                <!--- Update SiteMap File --->        <cfset createSiteMap()>                <!--- Re-visit page with clean url --->        <!---  ---><cflocation url="#thisScript#?#formArgs#">    </cfif>         <!-----------------------------------------------------------------------------------------------------------------------------SHOW EDITABLE RECORDS WITH PAGINATION----------------------------------------------------------------------------------------------------------------------------->   <cfinclude template="admin_pages/edit_index.cfm">        </div>      </div>      </div></div><!--/.fluid-container--> <cfset footer_script_links()><script>    $('.textarea').wysihtml5();</script> <script type="text/javascript" charset="utf-8">    $(prettyPrint);			function confirmation(delRecID,dispString) {		var answer = confirm("Delete " + dispString + "?")		if (answer){			window.location = "?<cfoutput>#formArgs#</cfoutput>&delete=" + delRecID;		}		}		$(document).ready(function(){			// Validate		// http://bassistance.de/jquery-plugins/jquery-plugin-validation/		// http://docs.jquery.com/Plugins/Validation/		// http://docs.jquery.com/Plugins/Validation/validate#toptions					$('#Add_form').validate({			rules: {			   keyword: {				required: true				//,email: true			  }, nav_main_id: {				required: true				//,email: true			  }, nav_sub_id: {				required: true				//,email: true			  }, tab_sections_id: {				required: true				//,email: true			  }, nav_main_priority: {				required: true				//,email: true			  }, nav_sub_priority: {				required: true				//,email: true			  }, tab_sections_priority: {				required: true				//,email: true			  }, img:{				accept:'.jpg'				  },  img_alt_splash: {				required: true				//,email: true			  }, img_alt_page: {				required: true				//,email: true			  }, meta_description: {				required: true				//,email: true			  }, meta_keywords: {				required: true				//,email: true			  }, tag_title: {				required: true				//,email: true			  }, headline: {				required: true				//,email: true			  }, sub_headline: {				required: true				//,email: true			  },  enable: {				required: true				//,email: true			  }, priority: {				required: true				//,email: true			  }			},			highlight: function(label) {				$(label).closest('.control-group').addClass('error');			},			success: function(label) {				label					.text('OK!').addClass('valid')					.closest('.control-group').addClass('success');			},			focusCleanup: true		  });		  		  $('#Edit_form').validate({			rules: {			   keyword: {				required: true				//,email: true			  }, nav_main_id: {				required: true				//,email: true			  }, nav_sub_id: {				required: true				//,email: true			  }, tab_sections_id: {				required: true				//,email: true			  }, nav_main_priority: {				required: true				//,email: true			  }, nav_sub_priority: {				required: true				//,email: true			  }, tab_sections_priority: {				required: true				//,email: true			  },			  	img:{				accept:'.jpg'				  },			    img_alt_splash: {				required: true				//,email: true			  }, img_alt_page: {				required: true				//,email: true			  }, meta_description: {				required: true				//,email: true			  }, meta_keywords: {				required: true				//,email: true			  }, tag_title: {				required: true				//,email: true			  }, headline: {				required: true				//,email: true			  }, sub_headline: {				required: true				//,email: true			  },  enable: {				required: true				//,email: true			  }, priority: {				required: true				//,email: true			  }			},			highlight: function(label) {				$(label).closest('.control-group').addClass('error');			},			success: function(label) {				label					.text('OK!').addClass('valid')					.closest('.control-group').addClass('success');			},			focusCleanup: true		  });		  	}); // end document.ready</script></body></html>