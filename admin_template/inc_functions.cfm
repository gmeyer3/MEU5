<!--- page header   ---><cffunction name="head_tag_code" output="yes">    <meta charset="utf-8">    <title>Admin Panel</title>    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <!-- Le styles -->    <link href="bootstrap/css/bootstrap.css" type="text/css" rel="stylesheet">    <link href="bootstrap/css/font-awesome.css" type="text/css" rel="stylesheet">    <link href="resource/css/style.css" type="text/css" rel="stylesheet">    <link href="bootstrap/css/prettify.css" rel="stylesheet" type="text/css" >        <link rel="stylesheet" href="resource/calendar/css/doc.css">    <link rel="stylesheet" href="resource/dataTabel/css/DT_bootstrap.css">    <style type="text/css">        body {            padding-top: 60px;            padding-bottom: 40px;            background-image: url("resource/img/bg.png");        }        .sidebar-nav {            padding: 9px 0;        }    </style>    <!--- <link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"> --->    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->    <!--[if lt IE 9]>    <script src="../bootstrap/js/html5.js"></script>    <![endif]-->    <!-- Le fav and touch icons -->    <link rel="shortcut icon" href="bootstrap/ico/favicon.ico">    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="bootstrap/ico/bootstrap-apple-114x114.png">    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="bootstrap/ico/bootstrap-apple-114x114.png">    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="bootstrap/ico/bootstrap-apple-72x72.png">    <link rel="apple-touch-icon-precomposed" href="bootstrap/ico/bootstrap-apple-57x57.png">    <script type="text/javascript" src="bootstrap/js/jquery.js"></script>    <script type="text/javascript" src="resource/js/bootstrap-tooltip.js"></script>    <script type="text/javascript" src="bootstrap/js/bootstrap.js"></script>    <script type="text/javascript" src="resource/js/udf.js"></script>        <script type="text/javascript" src="resource/js/tiny_mce/jquery.tinymce.js"></script>  <!--- <script type="text/javascript" src="resource/js/tiny_mce.js"></script> --->  <script type="text/javascript">	$(document).ready(function() {			$('textarea.tinymce').tinymce({				// Location of TinyMCE script				script_url : 'resource/js/tiny_mce/tiny_mce.js',					// General options				theme : "advanced",				plugins : "pagebreak,style,table,advhr,advlink,iespell,insertdatetime,preview,searchreplace,contextmenu,paste,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,advlist",					// Theme options				theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",				theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,|,forecolor,backcolor",				theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,iespell,advhr,|,ltr,rtl,|,fullscreen",				theme_advanced_toolbar_location : "top",				theme_advanced_toolbar_align : "left",				theme_advanced_statusbar_location : "bottom",				theme_advanced_resizing : true,					// Example content CSS (should be your site CSS)				content_css : "./css/layout1_setup.css",					// Drop lists for link/image/media/template dialogs				template_external_list_url : "lists/template_list.js",				external_link_list_url : "lists/link_list.js",				external_image_list_url : "lists/image_list.js",				media_external_list_url : "lists/media_list.js"					// Replace values for the template plugin				//template_replace_values : {				//	username : "Some User",				//	staffid : "991234"				//}			});		});  </script>   	    </cffunction><cffunction name="footer_script_links" output="yes">	    <script type="text/javascript" src="resource/wysi/js/prettify.js"></script>     <script type="text/javascript" src="resource/validate/jquery.validate.min.js"></script>         <script type="text/javascript" src="resource/dataTabel/js/jquery.dataTables.js"></script>    <script type="text/javascript" src="resource/dataTabel/js/DT_bootstrap.js"></script>	            <div class="modal hide fade" id="myModal">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            </div>            <div class="modal-body">                <p><img id="modalImg" src="" /></p>            </div>            <div class="modal-footer">                <a href="##" class="btn" data-dismiss="modal">Close</a>            </div>        </div>                                <script type="text/javascript" src="bootstrap/js/bootstrap-modal.js"></script>        <script type="text/javascript">        function imgModal(passedSrc){                $('##myModal').modal();        $('##modalImg').attr('src',passedSrc);    }    				        </script>          </cffunction><cffunction name="header_html" output="yes"><cfargument name="nav_headline" type="string" required="no" default=""><div class="navbar navbar-fixed-top">    <div class="navbar-inner">        <div class="container-fluid"><!--- class="container-fluid" --->            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">                <span class="icon-bar"></span>                <span class="icon-bar"></span>                <span class="icon-bar"></span>            </a>            <span class="brand" >Content Admin <cfif arguments.nav_headline NEQ ''>: #arguments.nav_headline#</cfif></span>            <!--- 			<div class="nav-collapse">                <ul class="nav">                    <li class="divider-vertical"></li>                    <li><a href="##"><i class="icon-comments-alt"></i> <span class="label label-important">3</span></a>                    </li>                    <li><a href="##"><i class="icon-envelope"></i> <span class="label label-important">3 new</span></a>                    </li>                    <li><a href="##"><i class="icon-refresh"></i> <span class="label label-info">3 updates</span></a>                    </li>                    <li>                        <ul class="nav">                            <li class="dropdown">                                <a href="##"                                   class="dropdown-toggle"                                   data-toggle="dropdown">                                    <i class="icon-list"></i> Item                                    <b class="caret"></b>                                </a>                                <ul class="dropdown-menu">                                    <li>                                        <a href="##"><i class="icon-list"></i> List Item</a>                                    </li>                                    <li>                                        <a href="##"><i class="icon-list"></i> List Item</a>                                    </li>                                    <li>                                        <a href="##"><i class="icon-list"></i> List Item</a>                                    </li>                                </ul>                            </li>                        </ul>                    </li>                </ul>				 --->                <ul class="nav pull-right">                   <!---  <li>                        <form class="navbar-search pull-left" action="">                            <input type="text" class="search-query span2" placeholder="Search">                        </form>                    </li>                    <li class="divider-vertical"></li> --->                    <li>                        <ul class="nav">                            <li class="dropdown">                                <a href="##"                                   class="dropdown-toggle"                                   data-toggle="dropdown">                                    <i class="icon-user"></i> <cfoutput>#session.username#</cfoutput>                                    <b class="caret"></b>                                </a>                                <ul class="dropdown-menu">                                    <li>                                        <div style="width: 314px">                                            <div class="modal-header">                                                <h3> <cfoutput>#session.username#</cfoutput> - Administrator</h3>                                            </div>                                            <div class="modal-body">                                                <div class="row-fluid">                                                    <div class="span3">                                                        <img src="resource/img/defaultPhoto.png" alt="" class="thumbnail span12">	                                                    </div>                                                    <div class="span9">                                                        <!--- <a href="##"><i class="icon-cogs"></i> Settings Account</a>                                                        <a href="##"><i class="icon-cogs"></i> Settings Privacy</a> --->                                                        <a href="index.cfm?logout" class="btn btn-warning"><i class="icon-off"></i> Log Out (<cfoutput>#session.username#</cfoutput>)</a>                                                    </div>                                                </div>                                            </div>                                            <div class="modal-footer">                                                                                            </div>                                        </div>                                    </li>                                </ul>                            </li>                        </ul>                    </li>                </ul>           <!---  </div> --->            <!--/.nav-collapse -->        </div>    </div></div></cffunction><cffunction name="left_top_html" output="yes">	<div class="row-fluid" style="position:fixed;"><!--- class="row-fluid" --->        <!--- <div class="span6">            <img src="resource/img/160x120.gif" alt="" class="span12 thumbnail">        </div> --->        <div class="span6">            <h6><cfoutput>#session.username#</cfoutput></h6>            <!--- <a href="##">Profile</a> |  ---><a href="index.cfm?logout">Logout</a>        </div>    </div>    <br></cffunction><cffunction name="left_nav_html" output="yes">    <div class="sidebar-nav span2" style="position:fixed;margin-top:40px;">                    <script type="text/javascript">			$(document).ready(function(){					$('[data-popover]').popover({						offset: 10					})					.click(function (e) {						e.preventDefault()					})				});			</script>				<style type="text/css">        .nav-list {			margin-bottom: 0;			padding-left: 0;			padding-right: 0;		}		.sidebar-nav {			margin-left:0!important;		}		.accordion-group { border:none;}	        </style>                <ul class="nav nav-list">            <li>                <div class="accordion" id="accordian2">                    <!--- <div class="accordion-group">                        <div class="accordion-heading">                            <a style="text-decoration: none;text-align: left" class="accordion-toggle btn btn-small btn-danger" href="dashboard.cfm">                                <i class="icon-home icon-white"></i><span> Dashboard</span>                            </a>                        </div>                    </div> --->                                        <div class="accordion-group">                        <div class="accordion-body" style="text-align:right;">                            <a style="text-decoration: none;text-align: left;" class="accordion-toggle btn btn-primary" href="admin_splash_text.cfm">                                <span> Splash Content</span>                            </a>                            <a data-popover title="Splash Content" style="text-decoration: none;text-align: left;" class="badge" href="##" data-content="This is the content within the 2 columns at the bottom on the home page of your site.">                                ?                            </a>                        </div>                    </div>                                                            <div class="accordion-group">                        <div class="accordion-body" style="text-align:right;">                            <a style="text-decoration: none;text-align: left" class="accordion-toggle btn btn-primary" href="admin_nav_main.cfm">                              <span> Main Nav</span>                            </a>                            <a data-popover title="Main Nav" style="text-decoration: none;text-align: left;" class="badge" href="##" data-content="<img src='resource/img_help/main_nav.gif'/>This controls the global navigation headings for your entire site.">                                ?                            </a>                         </div>                    </div>                    <div class="accordion-group">                        <div class="accordion-body" style="text-align:right;">                            <a style="text-decoration: none;text-align: left" class="accordion-toggle btn" href="admin_pages.cfm?nav_main=true">                                Pages: Main Nav</span>                            </a>                            <a data-popover title="Pages: Main Nav" style="text-decoration: none;text-align: left;" class="badge" href="##" data-content="<img src='resource/img_help/pages_main_nav.gif'/>This controls the global navigation items underneath Main Nav Items and page content">?</a>                        </div>                    </div>                                        <cfif session.userlevel EQ 1>                    <div class="accordion-group">                        <div class="accordion-body" style="text-align:right;">                            <a style="text-decoration: none;text-align: left" class="accordion-toggle btn btn-primary" href="admin_nav_sub.cfm">                                 Sub Nav</span>                            </a>                            <a data-popover title="Sub Nav" style="text-decoration: none;text-align: left;" class="badge" href="##" data-content="These are the home page button links right under the header slideshow.">?</a>                        </div>                    </div>                    </cfif>                    <div class="accordion-group">                        <div class="accordion-body" style="text-align:right;">                            <a style="text-decoration: none;text-align: left" class="accordion-toggle btn" href="admin_pages.cfm?nav_sub=true">                                 Pages: Sub Nav</span>                            </a>                            <a data-popover title="Pages: Sub Nav" style="text-decoration: none;text-align: left;" class="badge" href="##" data-content="These are the content pages related to the home page button links right under the header slideshow.">?</a>                        </div>                    </div>                                                            <div class="accordion-group">                        <div class="accordion-body" style="text-align:right;">                            <a style="text-decoration: none;text-align: left" class="accordion-toggle btn btn-primary" href="admin_tab.cfm">                               <span>Tabs</span>                            </a>                            <a data-popover title="Tabs" style="text-decoration: none;text-align: left;" class="badge" href="##" data-content="These are the tabs that hold news and events on the home page.">?</a>                        </div>                    </div>                    <div class="accordion-group">                        <div class="accordion-body" style="text-align:right;">                            <a style="text-decoration: none;text-align: left" class="accordion-toggle btn" href="admin_pages.cfm?tab=true">                                <span> Pages: Tabs</span>                            </a>                            <a data-popover title="Pages: Tabs" style="text-decoration: none;text-align: left;" class="badge" href="##" data-content="These are the content pages related to the tabs that hold news and events on the home page.">?</a>                        </div>                    </div>                                        <cfif session.userlevel LTE 2>                    <div class="accordion-group">                        <div class="accordion-heading">                            <a style="text-align: left;text-decoration: none" class="accordion-toggle btn btn-inverse"                               data-toggle="collapse" href="##collapseCompany" id="accordion_company">                                <i class="icon-globe"></i> Company                            </a>                        </div>                        <div id="collapseCompany" class="accordion-body collapse<cfif session.nav_accord_company_open> in</cfif>">                            <table class="table">                            <tr>                            <td>                                                                                        <a style="text-align: left;text-decoration: none" href="##" data-popover title="Company" data-content="<ul><li><strong>Information</strong>: Basic Company Information that is displayed within your web site.</li><li><strong>Locations</strong>: Your company location information.</li><li><strong>Users</strong>: User access accounts for administering this web site.</li></ul>">                                    <i class="icon-question-sign"></i>Help                                </a>                                                         </td>                            </tr>                            <tr>                            <td>                                                                                        <a style="text-align: left;text-decoration: none" href="admin_company.cfm">                                    <i class="icon-info-sign"></i>Information                                </a>                            </td>                            </tr>                            <tr>                            <td>                                  <a style="text-align: left;text-decoration: none" href="admin_company_locations.cfm">                                    <i class="icon-road"></i>Locations                                </a>                                                           </td>                            </tr>                                                                                    <tr>                            <td>                                  <a style="text-align: left;text-decoration: none" href="admin_users.cfm">                                    <i class="icon-user"></i>Users                                </a>                                                           </td>                            </tr>                                                        </table>                        </div>                    </div>                    </cfif>                                                           <div class="accordion-group">                        <div class="accordion-heading">                            <a style="text-align: left;text-decoration: none" class="accordion-toggle btn btn-inverse"                               data-toggle="collapse" href="##collapsePartner" id="accordion_partner">                                <i class="icon-briefcase"></i> Partners                            </a>                        </div>                        <div id="collapsePartner" class="accordion-body collapse<cfif session.nav_accord_partner_open> in</cfif>">                            <table class="table">                            <tr>                            <td>                                <a style="text-align: left;text-decoration: none" href="##" data-popover title="Partners" data-content="<ul><li><strong>Partner Categories </strong>: Insurance Categories to be associated with partners.</li><li><strong>Partner List </strong>: Your list of partner companies.</li><li><strong>Partner Associations </strong>: Allows for a single partner to be in more than one category.</li></ul>">                                    <i class="icon-question-sign"></i>Help                                </a>                                                         </td>                            </tr>                            <tr>                            <tr>                            <td>                                  <a style="text-align: left;text-decoration: none" href="admin_partner_categories.cfm">                                    <i class="icon-folder-open"></i>Partner Categories                                </a>                                                           </td>                            </tr>                            <tr>                            <td>                                  <a style="text-align: left;text-decoration: none" href="admin_partners.cfm">                                    <i class="icon-list"></i>Partner List                                </a>                                                           </td>                            </tr>                            <tr>                            <td>                                  <a style="text-align: left;text-decoration: none" href="admin_partner_associations.cfm">                                    <i class="icon-random"></i>Partner Associations                                </a>                                                           </td>                            </tr>                            </table>                        </div>                    </div>                                                        </div>            </li>        </ul>    </div></cffunction><cffunction name="fileControl" output="no"><cfargument name="postRootPath" required="yes" type="string" hint="folder path within site root."><cfargument name="fileField" required="yes" type="string"><cfargument name="reSizesArray" required="yes" type="array" hint="2 dimensional array with pixel widths in idx1 and suffix in idx2"><cfif arguments.fileField neq "">	   <!--- <cftry> --->						<cfset Error = 0>                <cfset MyPath = ExpandPath(".")>                <cfset DestPath = Replace(MyPath, "admin_template", arguments.postRootPath)>                <cfset MyPath = Replace(MyPath, "admin_template", arguments.postRootPath) & '/'>               				                <cffile result="uploadInfoStruct" action="UPLOAD" filefield="#arguments.fileField#" destination="#DestPath#" nameconflict="OVERWRITE" ><!--- accept="image/jpeg, image/jpg, image/pjpeg" --->                                <!--- <cfabort>                ATTEMPTEDSERVERFILE 	Renaissance.jpg                CLIENTDIRECTORY 	[empty string]                CLIENTFILE 	Renaissance.jpg                CLIENTFILEEXT 	jpg                CLIENTFILENAME 	Renaissance                CONTENTSUBTYPE 	jpeg                CONTENTTYPE 	image                DATELASTACCESSED 	{d '2013-01-05'}                FILEEXISTED 	YES                FILESIZE 	72839                FILEWASAPPENDED 	NO                FILEWASOVERWRITTEN 	YES                FILEWASRENAMED 	NO                FILEWASSAVED 	YES                OLDFILESIZE 	72839                SERVERDIRECTORY 	C:\inetpub\vhosts\specedpub.com\httpdocs\assets\img_pages                SERVERFILE 	Renaissance.jpg                SERVERFILEEXT 	jpg                SERVERFILENAME 	Renaissance                TIMECREATED 	{ts '2013-01-05 17:39:58'}                TIMELASTMODIFIED 	{ts '2013-01-05 17:39:58'}  --->                                <!--- Diverge actions based on if file is image or not --->                <cfdump var="#uploadInfoStruct#">                 <cfif uploadInfoStruct.contentType EQ 'image'>					                        <cfif uploadInfoStruct.CONTENTSUBTYPE NEQ 'jpeg'>							<!--- <cfthrow message="images must be jpeg"> ---><cfset Error = 1>						</cfif>												<cfset substart = len(Rtrim(uploadInfoStruct.CLIENTFILE)) - 3>                        <cfset presizename = RemoveChars(uploadInfoStruct.CLIENTFILE, substart, 4)>                        <!--- <cfset resizename = presizename & "_sm.jpg"> --->                                                <cfset upImage = imageRead("#uploadInfoStruct.SERVERDIRECTORY#/#uploadInfoStruct.SERVERFILE#")>                                                <!--- <cfcontent type="image/jpg" variable="#imageGetBlob(upImage)#">                        <cfcontent type="image/jpg" variable="#upImage#"> --->                                                <cfset upImageInfo = imageInfo(upImage)>                                                <!--- <cfdump var="#upImageInfo.width#">                        <cfdump var="#uploadInfoStruct#">                        <cfabort> --->                                                 <cfloop index="i" from="1" to="#arrayLen(arguments.reSizesArray)#">                            <cfif upImageInfo.width GT arguments.reSizesArray[i][1]>                                <cfset imageResize(upImage,arguments.reSizesArray[i][1],'')>                                <!--- <cfset imageSharpen(upImage,.4)> --->                                <cfset imageWrite(upImage,"#MyPath##presizename##arguments.reSizesArray[i][2]#.jpg","true",".60")>                            <cfelse>                                <cfset imageResize(upImage,'#upImageInfo.width#','')>                                <cfset imageWrite(upImage,"#MyPath##presizename##arguments.reSizesArray[i][2]#.jpg","true",".60")>                            </cfif>                        </cfloop>                                                <!---  Delete originally uploaded file --->                        <cffile action="delete" file="#uploadInfoStruct.SERVERDIRECTORY#/#uploadInfoStruct.SERVERFILE#">								<cfelse>                	<cffile action="UPLOAD" filefield="#arguments.fileField#" destination="#MyPath#" nameconflict="OVERWRITE">				</cfif>									           <!---  <cfcatch type="any">                <cfset Error = 1>            </cfcatch>	    </cftry> ---></cfif><cfif Error EQ 1>	<cfreturn false><cfelse>	<cfreturn uploadInfoStruct.SERVERFILE></cfif></cffunction><cffunction name="imageDelete" output="no"><cfargument name="postRootPath" required="yes" type="string" hint="folder path within site root."><cfargument name="fileBaseName" required="yes" type="string"><cfargument name="reSizesArray" required="yes" type="array" hint="2 dimensional array with pixel widths in idx1 and suffix in idx2"><cfset var Error = 0><cfif arguments.fileBaseName neq "">	   <!--- <cftry> --->						<cfif right(arguments.fileBaseName,3) EQ 'jpg'>					<!--- <cfset MyPath = ExpandPath(".") & '/testimg/'> --->                    <cfset MyPath = ExpandPath(".")>                    <cfset MyPath = Replace(MyPath, "admin_template", arguments.postRootPath) & '/'>                                                                     <!--- <cfloop index="i" from="1" to="#arrayLen(arguments.reSizesArray)#">                            <cfoutput>#MyPath##suffixAppend(arguments.fileBaseName,arguments.reSizesArray[i][2])#<br /></cfoutput>                                                    </cfloop>                        <cfabort> --->                        <cfloop index="i" from="1" to="#arrayLen(arguments.reSizesArray)#">                                    <cffile action="delete" file="#MyPath##suffixAppend(arguments.fileBaseName,arguments.reSizesArray[i][2])#">                        </cfloop>				<cfelse>                	<cffile action="delete" file="#MyPath##arguments.fileBaseName#">				</cfif>				<cfset Error = 0>								                                        	           <!---  <cfcatch type="any">                <cfset Error = 1>            </cfcatch>	    </cftry> ---></cfif><!--- <cfif Error EQ 1>	<cfreturn false><cfelse>	<cfreturn true></cfif> ---></cffunction><cffunction name="suffixAppend" output="no" returntype="string"><cfargument name="fileName" type="string" required="yes"><cfargument name="appendThisString" type="any" required="yes" hint="this gets placed between the file name and the .suffix"><cfset updatedString = ""><cfset tpArray = listToArray(arguments.fileName,'.')><cfif arrayLen(tpArray) LT 2>	<cfreturn></cfif><cfset updatedString = tpArray[1] & appendThisString & '.' & tpArray[2]><cfreturn updatedString></cffunction><cffunction name="createSiteMap" output="no" returntype="boolean"><cfset success = true><cftry>	<cfset allPages = get_pages(dsn)>    <cfset pfx = "http://">    <cfset dPg = "p.cfm">        <cfsavecontent variable="xmlFile"><?xml version="1.0" encoding="utf-8"?>    <!--- INITIALLY CREATE ENTRIES FOR EXISTING STATIC PAGES --->    <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">    <url>      <loc><cfoutput>#pfx##FQ_DOMAIN_NAME#</cfoutput></loc>      <changefreq>weekly</changefreq>    </url>    <cfoutput query="allPages">    <url>      <loc>#pfx##FQ_DOMAIN_NAME#/#dPg#?p=#replacenocase(keyword,' ','_','all')#</loc>      <changefreq>weekly</changefreq>     </url>    </cfoutput>        </urlset>    </cfsavecontent>        <cfset thisPagePath = replacenocase(ExpandPath("*.*"),'*.*','','all')>    <cfset placePath = replaceNoCase(thisPagePath,ADMIN_FOLDER_NAME,'')>    <cfset placePath = left(placePath,len(placePath) -1)>    <cffile action="write" nameconflict="overwrite" output="#xmlFile#" file="#placePath#sitemap.xml"><cfcatch type="any">	<cfset success = false></cfcatch></cftry><cfreturn success></cffunction><cffunction name="keyW" output="no" returntype="string">    <cfargument name="kwstring" type="string" required="yes">        <cfset updatedString = replaceNoCase(arguments.kwstring,' ','_','all')>        <cfreturn updatedString></cffunction>